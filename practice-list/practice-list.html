<style>
  /* Overlays: scrollable + momentum */
  #practice-overlay, #level-overlay{
    position:fixed; inset:0; z-index:100000; display:none;
    align-items:flex-start; justify-content:center;
    padding:12px 0; overflow:auto; -webkit-overflow-scrolling:touch;
    color:#e6f3ff; -webkit-tap-highlight-color:transparent;
    background-image:
      linear-gradient(rgba(0,0,0,.35), rgba(0,0,0,.45)),
      url('../img/wood.jpg');
    background-size:cover; background-position:center;
  }
  #practice-overlay .s-inner, #level-overlay .s-inner{
    width:min(92vw,720px); padding:16px 24px 22px; text-align:left; margin:0 auto;
  }

  /* Headers */
  #practice-overlay .s-header, #level-overlay .s-header{
    display:grid; grid-template-columns:auto 1fr; align-items:center; column-gap:14px;
    margin:6px 0 10px;
  }

  /* Practice header: title on first row, buttons under it */
  #practice-overlay .s-header{
    grid-template-columns:auto 1fr auto;
    grid-template-rows:auto auto;
  }
  #practice-overlay .s-title{
    grid-row:1; grid-column:1 / -1; text-align:center; padding-bottom:4px;
  }
  #practice-overlay #practice-back{
    grid-row:2; grid-column:1;
  }
  #practice-overlay #practice-favorites{
    grid-row:2; grid-column:3; justify-self:end;
  }

  /* Buttons (matching practice-board back / favorites / open) */
  .s-back,
  .s-fav{
    padding:8px 14px;
    border-radius:999px;
    cursor:pointer;
    font-weight:800;
    line-height:1;
    font-size:14px;

    background: rgba(37,99,235,.22);
    color:#e6f3ff;
    border:2px solid rgba(37,99,235,.78);
    box-shadow:
      0 8px 20px rgba(2,6,23,.45),
      inset 0 0 0 1px rgba(255,255,255,.08);

    text-shadow:0 1px 1px rgba(15,23,42,.65);
    transition:
      transform .06s,
      background .15s,
      box-shadow .15s,
      filter .12s;
  }
  .s-back:hover,
  .s-fav:hover{
    background: rgba(37,99,235,.27);
    filter:brightness(1.05);
  }
  .s-back:active,
  .s-fav:active{
    background: rgba(37,99,235,.34);
    transform:translateY(1px);
    box-shadow:
      0 4px 14px rgba(2,6,23,.55),
      inset 0 0 0 1px rgba(255,255,255,.06);
  }

  .s-title{
    margin:0;
    font-size:24px;
    line-height:1.15;
    font-weight:800;
    text-shadow:0 1px 2px rgba(0,0,0,.35);
  }

  .s-card{
    background: rgba(15,23,42,.60);
    border:1px solid rgba(148,163,184,.65);
    border-radius:12px;
    box-shadow:
      0 10px 26px rgba(15,23,42,.75),
      inset 0 0 0 1px rgba(255,255,255,.06);
    color:#e6f3ff;
  }

  .prac-grid{
    display:grid; grid-template-columns:1fr; gap:12px; margin-top:8px; touch-action:pan-y;
  }
  @media (min-width: 720px){
    #prac-categories.prac-grid,
    #prac-variations.prac-grid{ grid-template-columns:1fr 1fr; }
  }

  .prac-card{
    display:flex; align-items:stretch; gap:12px; width:100%; text-align:left; padding:10px; cursor:pointer;
    transition:transform .06s, background .15s, box-shadow .15s, filter .12s;
    user-select:none; -webkit-user-select:none;
  }
  .prac-card:hover{
    filter:brightness(1.04);
    box-shadow:
      0 14px 30px rgba(15,23,42,.85),
      inset 0 0 0 1px rgba(255,255,255,.08);
  }
  .prac-card:active{ transform:translateY(1px); }

  /* Thumbnail holders – wood, slightly transparent, a bit darker than menu buttons */
  .prac-thumb{
    width:132px; height:132px;
    border-radius:10px;
    overflow:hidden;
    flex:none;
    position: relative;

    background:none;
    border:1px solid rgba(248,250,252,.45);
    box-shadow:
      0 10px 22px rgba(0,0,0,.55),
      inset 0 0 0 1px rgba(255,255,255,.04);
  }
  .prac-thumb::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius:inherit;
    background-image:
      linear-gradient(
        to bottom,
        rgba(0,0,0,.48),
        rgba(0,0,0,.72)
      ),
      url('../img/wood.jpg');
    background-size:cover;
    background-position:center;
    opacity:0.70; /* a bit less bright than menu buttons (~0.82) */
  }
  .prac-thumb canvas.prac-canvas{
    position:absolute; inset:0;
    width:100%; height:100%;
    display:block;
    pointer-events:none;
    z-index:1;
  }

  .prac-meta{
    flex:1; min-width:0; display:flex; flex-direction:column; height:100%;
  }
  .prac-title{
    font-weight:800;
    font-size:18px;
    line-height:1.3;
    text-shadow:0 1px 1px rgba(15,23,42,.8);
  }
  .prac-desc{
    margin-top:6px;
    font-size:13px;
    line-height:1.5;
    color:#e6f3ff;
    opacity:.92;
  }

  .prac-cta{
    margin-top:auto; display:flex; align-items:center; gap:8px;
  }

  /* “Open / Select / Confirm” chip – same language as back / favorites */
  .s-btn{
    display:inline-block;
    padding:8px 13px;
    border-radius:999px;
    font-weight:800;
    font-size:14px;
    cursor:pointer;

    background: rgba(37,99,235,.22);
    color:#e6f3ff;
    border:2px solid rgba(37,99,235,.78);
    box-shadow:
      0 8px 20px rgba(2,6,23,.45),
      inset 0 0 0 1px rgba(255,255,255,.08);

    text-shadow:0 1px 1px rgba(15,23,42,.65);
    transition:
      transform .06s,
      background .15s,
      box-shadow .15s,
      filter .12s;
  }
  .s-btn:hover{
    background: rgba(37,99,235,.27);
    filter:brightness(1.05);
  }
  .s-btn:active{
    transform:translateY(1px);
    background: rgba(37,99,235,.34);
    box-shadow:
      0 4px 14px rgba(2,6,23,.55),
      inset 0 0 0 1px rgba(255,255,255,.06);
  }

  .prac-cta .fav-icon{
    display:inline-grid; place-items:center;
    padding:0; margin-left:auto;
    line-height:1; border-radius:12px;
    min-width:34px; min-height:34px;
    font-size:20px;
  }

  .s-btn.s-btn-danger{
    background: rgba(220,38,38,.22);
    border-color: rgba(220,38,38,.78);
  }

  .fav-toggle[aria-pressed="true"]{
    background: rgba(37,99,235,.35);
    border-color: #60a5fa;
  }

  .level-grid{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:8px; }
  @media (min-width: 720px){
    .level-grid{ grid-template-columns:1fr 1fr; }
  }
  .level-card{ position:relative; padding:12px; text-align:left; cursor:pointer; }
  .level-card:active{ transform:translateY(1px); }
  .level-title{ font-weight:900; font-size:16px; margin-bottom:4px; }
  .level-desc{ font-size:13px; line-height:1.5; opacity:.95; }
  .pro-chip{
    position:absolute; top:10px; right:10px; padding:3px 8px; font-size:11px; font-weight:900;
    border-radius:999px; background:#3b82f6; color:#fff; border:1px solid #3b82f6;
    box-shadow:0 6px 16px rgba(2,6,23,.45);
  }
  .level-card[aria-disabled="true"]{
    opacity:.55; cursor:not-allowed; filter:saturate(.9);
  }

  #practice-overlay.dragging{ cursor:grabbing; }

  /* Centered confirm toast (remove favorite) */
  #practice-overlay .prac-toast{
    position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
    z-index:100002; display:none; pointer-events:none;
  }
  #practice-overlay .prac-toast .prac-toast-card{
    pointer-events:auto;
    background-image:
      linear-gradient(rgba(0,0,0,.35), rgba(0,0,0,.45)),
      url('../img/wood.jpg');
    background-size:cover; background-position:center;
    border:2px solid rgba(37,99,235,.75);
    border-radius:12px;
    box-shadow:0 8px 20px rgba(2,6,23,.45), inset 0 0 0 1px rgba(255,255,255,.08);
    padding:10px 12px;
    min-width:280px; max-width:min(92vw, 420px);
    max-height:calc(100vh - 32px); overflow:auto;
    text-shadow:0 1px 2px rgba(0,0,0,.35);
  }
  #practice-overlay .prac-toast .prac-toast-text{
    font-weight:800; font-size:14px; line-height:1.35; color:#e6f3ff;
  }
  #practice-overlay .prac-toast .prac-toast-actions{
    margin-top:10px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;
  }
  #practice-overlay.toast-open .s-inner{ pointer-events:none; }

  /* Pro-level toast inside Level overlay */
  #level-overlay .level-toast{
    position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
    z-index:100002; display:none; pointer-events:none;
  }
  #level-overlay .level-toast .level-toast-card{
    pointer-events:auto;
    background-image:
      linear-gradient(rgba(0,0,0,.35), rgba(0,0,0,.45)),
      url('../img/wood.jpg');
    background-size:cover; background-position:center;
    border:2px solid rgba(37,99,235,.75);
    border-radius:12px;
    box-shadow:0 8px 20px rgba(2,6,23,.45), inset 0 0 0 1px rgba(255,255,255,.08);
    padding:10px 12px;
    min-width:280px; max-width:min(92vw, 420px);
    max-height:calc(100vh - 32px); overflow:auto;
    text-shadow:0 1px 2px rgba(0,0,0,.35);
  }
  #level-overlay .level-toast .level-toast-text{
    font-weight:800; font-size:14px; line-height:1.35; color:#e6f3ff;
  }
  #level-overlay .level-toast .level-toast-actions{
    margin-top:10px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;
  }
  #level-overlay.toast-open .s-inner{ pointer-events:none; }
</style>
